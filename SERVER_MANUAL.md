# Инструкция по управлению сервером

Эта инструкция поможет вам управлять приложением на сервере.

## 1. Подключение к серверу
В терминале на вашем компьютере выполните:
```bash
ssh root@217.198.9.71
cd /app/tg_gpt_seller
```

## 2. Управление контейнерами (Docker)

### Перезапуск всех сервисов (с пересборкой)
Если вы внесли изменения в код и хотите обновить приложение:
```bash
docker compose up --build -d
```
Флаг `-d` запускает процесс в фоновом режиме.

### Простой перезапуск (без пересборки)
Если нужно просто перезагрузить приложение (например, зависло):
```bash
docker compose restart
```

### Остановка сервисов
```bash
docker compose down
```

### Просмотр логов
Чтобы увидеть, что происходит внутри приложения (ошибки, сообщения):
```bash
# Логи веб-сайта (админки)
docker compose logs -f web

# Логи телеграм-бота
docker compose logs -f bot
```
Нажмите `Ctrl+C`, чтобы выйти из просмотра логов.

## 3. Обновление кода (Git)

**Важно:** На данный момент ваш сервер настроен на получение обновлений через **Push** с вашего компьютера (через `rsync`), а не через `git pull` на самом сервере. Папка `/app/tg_gpt_seller` пока не является Git-репозиторием.

### Как обновлять сейчас (с вашего компьютера):
Просто продолжайте работать с агентом или запускайте команду копирования файлов с вашего Mac.

### Если вы хотите настроить обновление через `git pull` на сервере:
1. Вам нужно будет склонировать репозиторий на сервере:
   ```bash
   cd /app
   rm -rf tg_gpt_seller_backup
   mv tg_gpt_seller tg_gpt_seller_backup # Сохраним текущую версию
   git clone https://github.com/v-team-v/tg_gpt_seller.git
   cd tg_gpt_seller
   ```
   *(Скорее всего, потребуется ввести логин/пароль от GitHub или настроить SSH-ключи, так как репозиторий приватный).*

2. Перенести `.env` файл из бэкапа:
   ```bash
   cp ../tg_gpt_seller_backup/.env .
   ```

3. После этого вы сможете обновляться командой:
   ```bash
   git pull
   docker compose up --build -d
   ```
